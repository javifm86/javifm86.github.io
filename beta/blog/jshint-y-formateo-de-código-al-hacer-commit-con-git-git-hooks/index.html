<!doctype html><html lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.60.0"><link rel=stylesheet href=https://javifm.com/beta/css/styles.css><title>JSHint y formateo de código al hacer commit con git (Git hooks) | Frontend developer</title></head><body><div id=site-wrapper class="relative overflow-hidden w-full"><div id=site-canvas class="w-full h-full relative"><a id=skiplink class="sr-only absolute top-0 left-0 mt-2 ml-1 font-semibold bg-gray-300 dark:bg-gray-700 rounded-sm p-2 uppercase text-gray-700 dark:text-gray-300" href=#main>Saltar al contenido principal</a><div class="bg-gray-100 dark:bg-gray-800 border-t-4 border-green-500"><div class="container mx-auto"><nav class="flex flex-wrap justify-end items-center p-4"><a href=https://javifm.com/beta/ class="mr-auto p-2 -m-2 last:mr-0" aria-hidden=true><span class=sr-only>Inicio</span><svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3640 3640" aria-hidden="true" class="w-10 h-10"><path d="M2958 1348l-156-202 69-55c89-70 141-147 147-217 11-127-66-244-181-278-67-19-79-20-139-2-66 21-67 21-228 151-505 408-832 666-840 663-11-4-310-378-310-388 0-9 943-765 1025-822 119-84 245-120 415-121 156 0 305 41 418 116 145 96 269 258 320 417 19 60 39 203 36 255-8 119-39 244-82 327-19 36-96 145-129 183-10 11-54 49-98 84-44 36-87 70-96 78-14 12-35-11-171-189z" id="layer101" fill="#0080b2" stroke="none"/><path d="M671 1839c-227-280-432-541-455-579-115-186-141-441-67-658C264 269 6e2 48 955 73c112 8 193 30 3e2 82 116 56 190 117 293 240 66 80 80 102 70 112-7 7-101 80-208 163l-195 151-40-48c-22-26-61-69-86-94-136-136-365-86-434 94-22 59-17 148 12 204 12 23 205 267 428 543 224 276 405 503 403 504s-91 71-198 156c-107 84-2e2 157-206 161-6 5-163-181-423-502z" id="layer102" fill="#03b8ab" stroke="none"/><path d="M741 3559c-118-23-249-84-345-162-327-262-385-737-132-1074 43-57 94-105 207-196l46-37 153 196c84 108 153 202 154 209 0 7-30 39-69 71-90 76-125 140-125 230 0 187 197 311 365 230 28-14 270-2e2 540-415 269-215 493-390 497-389 4 2 78 90 164 197 109 135 154 198 148 207-15 22-965 774-1034 819-84 55-166 89-262 109-82 17-234 20-307 5z" id="layer103" fill="#ea6675" stroke="none"/><path d="M2605 3556c-191-44-333-137-477-314-51-62-58-76-47-87 8-7 99-79 203-160l189-147 26 34c99 127 165 170 264 171 113 0 207-68 243-176 18-55 15-131-8-182-7-16-192-254-411-529-327-409-396-501-385-511 49-45 373-298 383-299 13-1 750 913 823 1020 84 124 125 262 125 424 0 339-204 620-530 733-75 25-105 30-213 33-83 3-145-1-185-10z" id="layer104" fill="#ffa73d" stroke="none"/></svg></a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 dark:hover:bg-transparent hover:rounded-sm dark:text-gray-200 dark:hover:text-green-500 mr-3 md:mr-6" href=/beta/>Inicio</a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex font-semibold bg-gray-300 dark:bg-transparent rounded-sm dark:text-green-500 mr-3 md:mr-6" href=/beta/blog/ aria-current=page>Blog</a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 dark:hover:bg-transparent hover:rounded-sm dark:text-gray-200 dark:hover:text-green-500 mr-3 md:mr-6" href=/beta/tags/>Tags</a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 dark:hover:bg-transparent hover:rounded-sm dark:text-gray-200 dark:hover:text-green-500 mr-3 md:mr-6" href=/beta/sobre-mi/>Sobre mí</a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 dark:hover:bg-transparent hover:rounded-sm dark:text-gray-200 dark:hover:text-green-500 mr-3 md:mr-6" href=/beta/search/>Buscar</a>
<a class="p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 dark:hover:bg-transparent hover:rounded-sm dark:text-gray-200 dark:hover:text-green-500" href=/beta/contact/>Contacto</a>
<button type=button id=sidebar-open aria-label="Abrir menu" class="sm:hidden text-gray-700 dark:text-gray-300 flex items-center uppercase text-xl p-1 -m-1">
Menú<svg xmlns="http://www.w3.org/2000/svg" class="ml-2 w-6 h-6 fill-current" id="open-menu" role="img" aria-labelledby="titleId" viewBox="0 0 20 20"><title id="titleId">Menú</title><path role="presentation" d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="ml-2 w-6 h-6 fill-current hidden" id="close-menu" role="img" aria-labelledby="titleId" viewBox="0 0 20 20"><title id="titleId">Cerrar</title><path role="presentation" d="M10 8.586 2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"/></svg></button></nav></div></div><div id=site-menu class="h-full absolute top-0 py-6 px-4 bg-gray-800 dark:bg-gray-700 hidden border-l border-transparent dark:border-gray-600"><nav class="flex flex-col uppercase text-xl"><a class="mb-1 px-4 py-2 text-gray-100" href=/beta/>Inicio</a>
<a class="mb-1 px-4 py-2 bg-green-600 rounded text-white font-semibold outline-none focus:bg-white focus:text-green-600" href=/beta/blog/>Blog</a>
<a class="mb-1 px-4 py-2 text-gray-100" href=/beta/tags/>Tags</a>
<a class="mb-1 px-4 py-2 text-gray-100" href=/beta/sobre-mi/>Sobre mí</a>
<a class="mb-1 px-4 py-2 text-gray-100" href=/beta/search/>Buscar</a>
<a class="mb-1 px-4 py-2 text-gray-100" href=/beta/contact/>Contacto</a></nav></div><main id=main><div class="bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-600"></div><article class="container mx-auto px-4 single-post"><div class=my-6><h1 class=title>JSHint y formateo de código al hacer commit con git (Git hooks)</h1><div class="flex flex-wrap flex-col sm:flex-row sm:items-center text-gray-700 dark:text-gray-300"><time datetime=2015-07-02>Publicado el 2 Jul 2015</time>
<span><span class="mx-2 hidden sm:inline-flex">&bull;</span>Tiempo de lectura: 7min</span></div><div class=mt-4><a class="tag inline-block text-sm mr-2 mb-2" href=https://javifm.com/beta/tags/git>git</a>
<a class="tag inline-block text-sm mr-2 mb-2" href=https://javifm.com/beta/tags/hook>hook</a>
<a class="tag inline-block text-sm mr-2 mb-2" href=https://javifm.com/beta/tags/jshint>JSHint</a>
<a class="tag inline-block text-sm mr-2 mb-2" href=https://javifm.com/beta/tags/script>script</a></div></div><div class=single-post-content><p>A la hora de trabajar en equipo, tener una guía de estilos definida es de vital importancia. Estoy trabajando en un proyecto en el cual por diversos motivos que no vienen al caso, se podría mejorar bastante en ese aspecto, y mediante el uso de <a href=https://nodejs.org/>Node.js</a> disponemos de herramientas que nos pueden ayudar a tener en un equipo un código más uniforme y estandar.</p><p>Para nuestro proyecto he elegido un linter, en este caso <a href=https://www.npmjs.com/package/jshint>JSHint</a>, y un formateador para el código Javascript, que representa el grueso de los desarrollos de nuestra aplicación, <a href=https://www.npmjs.com/package/js-beautify>js-beautify</a>. Podría incorporarse además una tercera herramienta, muy potente a la hora de definir exactamente los estilos que deseamos aplicar de manera muy minuciosa, <a href=https://www.npmjs.com/package/jscs>JSCS</a>, que se ocupa de muchas opciones de estilo que actualmente mantiene JSHint, pero que pronto <strong>pasarán a estar deprecadas.</strong>  (Actualización: Parece que <a href=http://eslint.org/>ESLint</a> es una alternativa equilibrada a JSHint y JSCS, tengo que probarlo más a fondo). Por el momento me limitaré a las 2 mencionadas.</p><p>Como control de versiones, utilizamos <a href=https://git-scm.com/>Git</a>, y aunque la consola es muy completa, en el día a día para según que tareas, es mucho mejor a la hora de seguir un historial de commits, ver cambios y hacer mergeos una herramienta gráfica como <a href=https://www.sourcetreeapp.com/>SourceTree</a>, que es la que uso y recomiendo.</p><p>Para estandarizar nuestro código, he decidido crear una serie de reglas a la hora de validar el código Javascript, y una vez validado, el archivo deberá ser formateado de acuerdo a otra serie de reglas, de manera que en el repositorio siempre dispongamos de archivos libres de errores, con un mismo formato y siguiendo el mismo estilo.</p><p>La idea es simple, quiero que cada vez que alguien vaya a hacer commit de sus cambios al repositorio, se validen los ficheros Javascript de acuerdo a unas reglas comunes de JSHint, y si el archivo no contiene errores será formateado automáticamente antes del commit al repositorio. La idea es hacerlo automático, así nadie tiene ninguna excusa. Veamos primero como instalar a nivel de proyecto las 2 herramientas.</p><p>En primer lugar vamos a instalar JSHint. Podemos instalarlo a nivel global, o a nivel de proyecto, me quedaré con esta última opción, de esa manera podemos disponer en cada proyecto de una configuración especifica de JSHint con las reglas que deseemos aplicar a cada proyecto. Iremos a la consola, y estando en el directorio raíz de nuestro proyecto, ejecutaremos el siguiente comando:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>npm install --save-dev jshint</code></pre></div><p>Se creará un directorio llamado <code>node_modules</code> donde se instalará JSHint para nuestro proyecto específico. A la hora de definir las reglas para el proyecto, lo mejor será tener un fichero <code>.jshintrc</code>, que contenga todas las reglas y esté también en el repositorio, para que si se modifica alguna cosa, todos se actualicen al hacer pull. Hay muchas opciones, están todas explicadas en la documentación oficial, pongo como ejemplo el archivo que he creado para nuestro proyecto:</p><div class=highlight><pre class=chroma><code class=language-JavaScript data-lang=JavaScript><span class=p>{</span>
    <span class=s2>&#34;evil&#34;</span>      <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;regexdash&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;browser&#34;</span>   <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;wsh&#34;</span>       <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;trailing&#34;</span>  <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;multistr&#34;</span>  <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;sub&#34;</span>       <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;loopfunc&#34;</span>  <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;expr&#34;</span>      <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;jquery&#34;</span>    <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;newcap&#34;</span>    <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;plusplus&#34;</span>  <span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;curly&#34;</span>     <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;eqeqeq&#34;</span>    <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
    <span class=s2>&#34;undef&#34;</span>     <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;eqnull&#34;</span>    <span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;globals&#34;</span>   <span class=o>:</span> <span class=p>{</span>
        <span class=s2>&#34;jQuery&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=s2>&#34;console&#34;</span><span class=o>:</span> <span class=kc>true</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>A continuación instalaremos js-beautify, también localmente en el proyecto, desde la consola en la raíz del proyecto:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>npm install --save-dev js-beautify</code></pre></div><p>Igual que en el caso anterior, crearemos un fichero <code>.beautifyrc</code> con las opciones que queremos que se utilicen a nivel de proyecto para formatear los ficheros javascript. Este es el nuestro:</p><div class=highlight><pre class=chroma><code class=language-JavaScript data-lang=JavaScript><span class=p>{</span>
    <span class=s2>&#34;indent_size&#34;</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
    <span class=s2>&#34;indent_char&#34;</span><span class=o>:</span> <span class=s2>&#34; &#34;</span><span class=p>,</span>
    <span class=s2>&#34;indent_level&#34;</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
    <span class=s2>&#34;indent_with_tabs&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;preserve_newlines&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;max_preserve_newlines&#34;</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
    <span class=s2>&#34;jslint_happy&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;space_after_anon_function&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;brace_style&#34;</span><span class=o>:</span> <span class=s2>&#34;end-expand&#34;</span><span class=p>,</span>
    <span class=s2>&#34;keep_array_indentation&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;keep_function_indentation&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;space_before_conditional&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
    <span class=s2>&#34;break_chained_methods&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;eval_code&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;unescape_strings&#34;</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
    <span class=s2>&#34;wrap_line_length&#34;</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
    <span class=s2>&#34;wrap_attributes&#34;</span><span class=o>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
    <span class=s2>&#34;wrap_attributes_indent_size&#34;</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
    <span class=s2>&#34;end_with_newline&#34;</span><span class=o>:</span> <span class=kc>true</span>
<span class=p>}</span>
</code></pre></div><p>Puedes consultar el listado de opciones para añadir/modificar según tus preferencias. Ya está todo listo, ahora simplemente hemos de hacer que automáticamente <strong>al hacer commit, se pase el JSHint a todos los ficheros javascript automáticamente,</strong> y si detecta algún error en alguno de los archivos, no será posible hacer commit, ya que git dará error hasta que no se solucionen. ¿Cómo puede automatizarse este proceso?</p><p>A través de lo que se llaman hooks, que no son más que scripts que lanza git automáticamente cuando determinadas acciones ocurren. Puedes ir al directorio .git de tu proyecto, y allí encontrarás una carpeta <code>hooks</code> en la que hay scripts de ejemplo con la extensión <code>.sample</code>. El que nos interesa para este ejemplo, es el script ejecutado antes de hacer commit, que realizará tareas en el momento que hagamos commit. Para ello simplemente crearemos un archivo llamado <code>pre-commit</code>, sin extensión, o bien editaremos el archivo <code>pre-commit.sample</code> y modificaremos su nombre. El script que he creado en cuestión es el siguiente:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/bin/sh
</span><span class=cp></span>
<span class=c1># Solo queremos validar y formatear los ficheros Javascript incluidos en el commit</span>
<span class=nv>files</span><span class=o>=</span><span class=k>$(</span>git diff --cached --name-only --diff-filter<span class=o>=</span>ACM <span class=p>|</span> grep <span class=s2>&#34;</span><span class=s2>.js</span>$<span class=s2>&#34;</span><span class=k>)</span>

<span class=c1># Si no hay ficheros Javascript se continúa normalmente el commit</span>
<span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$files</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> 
    <span class=nb>exit</span> <span class=m>0</span> 
<span class=k>fi</span>

<span class=c1># Variable que comprueba si todas las validaciones fueron correctas</span>
<span class=nv>pass</span><span class=o>=</span><span class=nb>true</span>

<span class=nb>echo</span> <span class=s2>&#34;Validando Javascript con JSHint:&#34;</span>

<span class=c1># Recorremos todos los archivos</span>
<span class=k>for</span> file in <span class=nv>$files</span><span class=p>;</span> <span class=k>do</span>

    <span class=nv>excluded</span><span class=o>=</span><span class=nb>false</span>

    <span class=c1># Recorre las líneas del fichero exclude-hook.txt ubicado en el raíz del proyecto</span>
    <span class=c1># en busca de ficheros o patrones a excluir. No interesa formatear y validar por</span>
    <span class=c1># ejemplo, librerías externas como Jasmine, que no tienen por qué seguir la misma</span>
    <span class=c1># guía de estilo de nuestro proyecto.</span>
    <span class=k>while</span> <span class=nb>read</span> line <span class=o>||</span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=nv>$line</span><span class=s2>&#34;</span> <span class=o>]</span>
    <span class=k>do</span>
        <span class=c1># Coincidencia encontrada. Se excluye el fichero.</span>
        <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file</span><span class=p>#*</span><span class=nv>$line</span><span class=si>}</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
            <span class=nb>echo</span> <span class=s2>&#34;</span><span class=s2>Excluido </span><span class=nv>$file</span><span class=s2>&#34;</span>
            <span class=nv>excluded</span><span class=o>=</span><span class=nb>true</span>
            <span class=nb>break</span>
        <span class=k>fi</span>

    <span class=c1># &#39;&lt; exclude-hook.txt&#39; es el equivalente a &#39;cat exclude-hook.txt&#39;</span>
    <span class=k>done</span> &lt; exclude-hook.txt

    <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$excluded</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=nb>true</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
        <span class=k>continue</span>
    <span class=k>fi</span>

    <span class=nv>result</span><span class=o>=</span><span class=k>$(</span>jshint <span class=nv>$file</span> <span class=p>|</span> egrep <span class=s2>&#34;error&#34;</span><span class=k>)</span>
    <span class=nb>echo</span> <span class=nv>$result</span>

    <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$result</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=s2>JSHint fallido: </span><span class=nv>$file</span><span class=s2>&#34;</span>
        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span>jshint <span class=nv>$file</span><span class=k>)</span><span class=s2>&#34;</span>
        <span class=nv>pass</span><span class=o>=</span><span class=nb>false</span>
    <span class=k>else</span>
        <span class=nb>echo</span> <span class=s2>&#34;</span><span class=s2>JSHint validado: </span><span class=nv>$file</span><span class=s2>&#34;</span>
        <span class=nv>beautify</span><span class=o>=</span><span class=k>$(</span>js-beautify <span class=nv>$file</span> -r -P --config .beautifyrc<span class=k>)</span>
        <span class=nv>add</span><span class=o>=</span><span class=k>$(</span>git add <span class=nv>$file</span><span class=k>)</span>
    <span class=k>fi</span>
<span class=k>done</span>

<span class=nb>echo</span> <span class=s2>&#34;Validación de Javascript completa&#34;</span>

<span class=k>if</span> ! <span class=nv>$pass</span><span class=p>;</span> <span class=k>then</span>
    <span class=nb>echo</span> <span class=s2>&#34;Es necesario corregir los errores mostrados por JSHint. Abortando commit.&#34;</span>
    <span class=nb>exit</span> 1
<span class=k>else</span>
    <span class=nb>echo</span> <span class=s2>&#34;Validación y formateado satisfactorios.&#34;</span>
    <span class=nb>exit</span> 0
<span class=k>fi</span></code></pre></div><p>En primer lugar filtraremos los archivos que se están comiteando, y nos quedaremos solo con <strong>los que tienen extensión .js.</strong> Además, en el raíz del repositorio, en un fichero llamado <code>exclude-hook.txt</code>, añadiremos patrones, que si son encontrados en las rutas del fichero, hará que se excluya al fichero del proceso. Ficheros que por ejemplo no queremos que sean validados y formateados, librerías externas de terceros, como Jasmine, jQuery, archivos minimizados, etc. Un ejemplo de fichero:</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text>.min.js
jasmine
source/lib</code></pre></div><p>De esta manera ignoraremos todo lo que esté en <code>source/lib</code>, contenga la palabra <code>jasmine</code> o contenga los caracteres <code>.min.js</code>.</p><p>Iremos pasando fichero por fichero JSHint, si hay algún error se mostrará en la consola, si no hay ningún error en el fichero este se formatea automáticamente, y se hace git add para añadir los cambios hechos en el fichero. Una vez validados todos, comprobaremos si hubo algún error en alguno, si lo hubo saldremos con código 1, que impide que se haga el commit. En caso de que todo esté bien, se sale con código 0 y nuestro commit será enviado al repositorio correctamente.</p><p>Debo decir que formatear el código Javascript no es para lo que está pensado el hook <code>pre-commit</code>, en él, siendo estrictos, solo deberían llevarse a cabo tareas que no modificasen el código, como son validar el código, ejecución de pruebas unitarias, etc. Por ejemplo este script no funcionaría correctamente, en un caso más avanzado, como sería commitear sólo una parte de un fichero.</p><p>Lo ideal sería que cada desarrollador tuviese configurado su editor para formatear el código, pero bueno, en este caso, por el bien de que todos los ficheros tengan la misma guía de estilos, este aspecto representa un mal menor.</p><p>Un script de mucha utilidad, que evitará que subamos archivos con errores de sintáxis o de estilo. Puedes ampliar información sobre hooks en la <a href=http://git-scm.com/docs/githooks>página de Git</a>, o en <a href=http://githooks.com/>Git Hooks</a>.</p></div><div class="my-16 border-b border-gray-400"></div><div class="mb-6 text-center max-w-3xl mx-auto"><a class="outline-none bg-transparent dark:bg-gray-800 text-green-700 dark:text-green-500 font-semibold hover:text-white dark:hover:text-gray-800 dark:focus:text-gray-800 hover:bg-green-500 dark:hover:bg-green-500 dark:focus:bg-green-500 focus:text-white focus:bg-green-500 py-2 px-4 border border-green-500 dark:border-none hover:border-transparent rounded block mb-4 transition-all-100" href=https://javifm.com/beta/blog/ellipsis-de-m%C3%BAltiples-l%C3%ADneas-con-javascript/>&laquo; Ellipsis de múltiples líneas con Javascript</a>
<a class="outline-none bg-transparent dark:bg-gray-800 text-green-700 dark:text-green-500 font-semibold hover:text-white dark:hover:text-gray-800 dark:focus:text-gray-800 hover:bg-green-500 dark:hover:bg-green-500 dark:focus:bg-green-500 focus:text-white focus:bg-green-500 py-2 px-4 border border-green-500 dark:border-none hover:border-transparent rounded block mb-4 transition-all-100" href=https://javifm.com/beta/blog/concatenar-llamadas-a-m%C3%A9todos-en-javascript/>Concatenar llamadas a métodos en Javascript &raquo;</a></div></article></main><footer class="bg-gray-900 text-gray-200 p-4"><div class="container mx-auto flex justify-between items-center"><p>&copy; 2019 Sitio construido con <a class="text-white underline" href=https://gohugo.io/>Hugo</a> alojado en <a class="text-white underline" href=https://github.com/>Github</a>.</p><div class="flex items-center"><a href=https://github.com/javifm86 class="mr-1 p-2 text-gray-300 hover:text-white"><span class=sr-only>Github</span><svg class="w-8 pointer-events-none" viewBox="0 0 256 250" role="img" aria-labelledby="titleId" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid"><title id="titleId">Github</title><path role="presentation" class="fill-current" d="M128.001.0C57.317.0.0 57.307.0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158.0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258.0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874.0.0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358.0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704.0 17.126-.148 30.91-.148 35.126.0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691.0 128.001.0zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86.0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403z"/></svg></a>
<a href=https://twitter.com/javifm86 class="p-2 text-gray-300 hover:text-white"><span class=sr-only>Twitter</span><svg class="w-8 mt-1 pointer-events-none" role="img" aria-labelledby="titleId" viewBox="0 0 256 209" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid"><title id="titleId">Twitter</title><path role="presentation" class="fill-current" d="M256 25.45a105.04 105.04.0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183.0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006.0-52.523 23.516-52.523 52.52.0 4.117.465 8.125 1.36 11.97-43.65-2.191-82.35-23.1-108.255-54.876-4.52 7.757-7.11 16.78-7.11 26.404.0 18.222 9.273 34.297 23.365 43.716a52.312 52.312.0 0 1-23.79-6.57c-.003.22-.003.44-.003.661.0 25.447 18.104 46.675 42.13 51.5a52.592 52.592.0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475-17.975 14.086-40.622 22.483-65.228 22.483-4.24.0-8.42-.249-12.529-.734 23.243 14.902 50.85 23.597 80.51 23.597 96.607.0 149.434-80.031 149.434-149.435.0-2.278-.05-4.543-.152-6.795A106.748 106.748.0 0 0 256 25.45"/></svg></a></div></div></footer></div></div><script src=https://javifm.com/beta/js/focus-visible.min.js></script><script>(function(){const $bodyElement=document.getElementsByTagName('body')[0];const $svgOpen=document.getElementById('open-menu');const $svgClose=document.getElementById('close-menu');const $siteCanvas=document.getElementById('site-canvas');const $siteMenu=document.getElementById('site-menu');const $buttonNav=document.getElementById('sidebar-open');const transitionEnd=transitionEndEventName();const CSS_CLASS_NAV='show-nav';let stateNav='closed';const closeMenuOnResize=debounce(function(){if($bodyElement.classList.contains(CSS_CLASS_NAV)&&window.screen.width>639){toggleNav();}},0);$buttonNav.addEventListener('click',toggleNav);window.addEventListener('resize',closeMenuOnResize);$siteCanvas.addEventListener(transitionEnd,function(){if(stateNav==='opening'){$svgOpen.classList.add('hidden');$svgClose.classList.remove('hidden');$buttonNav.setAttribute('aria-label','Cerrar menú');stateNav='open';}else{$svgOpen.classList.remove('hidden');$svgClose.classList.add('hidden');$siteMenu.classList.add('hidden');$buttonNav.setAttribute('aria-label','Abrir menú');stateNav='closed';}},false);function toggleNav(){if($bodyElement.classList.contains(CSS_CLASS_NAV)){$bodyElement.classList.remove(CSS_CLASS_NAV);stateNav='closing';}else{$bodyElement.classList.add(CSS_CLASS_NAV);stateNav='opening';$siteMenu.classList.remove('hidden');}}
function debounce(func,wait,immediate){let timeout;return function(){let context=this;let args=arguments;const later=function(){timeout=null;if(!immediate){func.apply(context,args);}};let callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){func.apply(context,args);}};}
function transitionEndEventName(){let i;const el=document.createElement('div');const transitions={'transition':'transitionend','OTransition':'otransitionend','MozTransition':'transitionend','WebkitTransition':'webkitTransitionEnd'};for(i in transitions){if(transitions.hasOwnProperty(i)&&el.style[i]!==undefined){return transitions[i];}}}})();</script></body></html>