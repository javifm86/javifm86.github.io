<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Hugo 0.58.3" />
    
    <link rel="stylesheet" href="https://javifm.com/beta/css/styles.css">
    
    
    <title>Ellipsis de múltiples líneas con Javascript | Frontend developer</title>
    <style>
    .testing {
      max-width: 700px;
    }
</style>

  </head>

  <body>
    <div class="bg-gray-100 prefers-dark:bg-gray-900 border-t-4 border-green-500">
    <div class="container mx-auto">
        <nav class="flex p-6">
            
            
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/">Inicio</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase active" href="/beta/blog/">Blog</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/tags/">Tags</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/sobre-mi/">Sobre mí</a>
            
        </nav>
    </div>
</div>

    
      <main id="main">
       

<div class="container mx-auto px-4 single-post">
    <div class="my-6">
        <h1 class="title">Ellipsis de múltiples líneas con Javascript</h1>
        

<div class="flex flex-wrap items-center text-gray-600">
    <time datetime="2015-09-07">
        Publicado el 7 Sep 2015</time>
    
    <span>
        <span class="mx-2">&bull;</span>Tiempo de lectura: 2min
    </span>
    
</div>

    <div class="mt-4">
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/javascript">javascript</a>
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/css">css</a>
        
    </div>


    </div>
    <div class="single-post-content">
        <p>Ellipsis es simplemente un cáracter compuesto por tres puntos: &#8220;…&#8221;. En desarrollo web, se aplica a textos muy largos que son más grandes que su contenedor, y por tanto queremos que sean recortados agregando al final el carácter ellipsis. Con el avance de los estándares css modernos, ya podemos aplicar una solución sin necesidad de echar mano de Javascript:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css">.<span style="color:#a6e22e">ellipsis</span> {
    <span style="color:#66d9ef">white-space</span>: <span style="color:#66d9ef">nowrap</span>;
    <span style="color:#66d9ef">overflow</span>: <span style="color:#66d9ef">hidden</span>;
    <span style="color:#66d9ef">text-overflow</span>: <span style="color:#66d9ef">ellipsis</span>;
    <span style="color:#66d9ef">-o-</span><span style="color:#66d9ef">text-overflow</span>: <span style="color:#66d9ef">ellipsis</span>;
}</code></pre></div>

<p>¿Cual es la limitación? Que sólo funciona en textos con una línea, si tenemos más de una línea no funciona, y es ahí donde entra en juego Javascript. He creado una sencilla función, simplemente es necesario que en css el elemento disponga de un line-height definido para funcionar.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#75715e">/**
</span><span style="color:#75715e"> *  Acorta strings multilinea añadiendo el símbolo ellipsis.
</span><span style="color:#75715e"> *  @param  {jQuery}  $obj     : Objeto jQuery a aplicar si es necesario.
</span><span style="color:#75715e"> *                               Importante, debe tener line-height definido.
</span><span style="color:#75715e"> *  @param  {String}  val      : Texto a insertar.
</span><span style="color:#75715e"> *  @param  {Number}  maxLines : Máximo de líneas permitidas.
</span><span style="color:#75715e"> */</span>

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">ellipsis</span>( <span style="color:#a6e22e">$obj</span>, <span style="color:#a6e22e">val</span>, <span style="color:#a6e22e">maxLines</span> ) {

    <span style="color:#66d9ef">if</span> ( <span style="color:#a6e22e">maxLines</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">lt</span>; <span style="color:#ae81ff">2</span> ) {
        <span style="color:#a6e22e">$obj</span>.<span style="color:#a6e22e">text</span>( <span style="color:#a6e22e">val</span> );
        <span style="color:#66d9ef">return</span>;
    }

    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_valueAux</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">val</span>,
        <span style="color:#a6e22e">_lenValueAux</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_valueAux</span>.<span style="color:#a6e22e">length</span>,
        <span style="color:#a6e22e">_heightLine</span> <span style="color:#f92672">=</span> parseFloat( <span style="color:#a6e22e">$obj</span>.<span style="color:#a6e22e">css</span>( <span style="color:#e6db74">&#34;line-height&#34;</span> ) ),

        <span style="color:#75715e">/*
</span><span style="color:#75715e">         *  Añadimos 2 porque algunos navegadores redondean line-height,
</span><span style="color:#75715e">         *  asi que cubrimos el máximo valor en px de line-height redondeado.
</span><span style="color:#75715e">         */</span>
        <span style="color:#a6e22e">_maxHeight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">maxLines</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">_heightLine</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>;

    <span style="color:#a6e22e">$obj</span>.<span style="color:#a6e22e">text</span>( <span style="color:#a6e22e">_valueAux</span> );

    <span style="color:#75715e">// Si hay más líneas de las esperadas
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> ( ( <span style="color:#a6e22e">$obj</span>[ <span style="color:#e6db74">&#34;0&#34;</span> ].<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">_maxHeight</span> ) <span style="color:#f92672">&amp;&amp;</span> ( <span style="color:#a6e22e">_lenValueAux</span> ) ) {

        <span style="color:#75715e">// Reducimos el length del string hasta que queden las líneas deseadas
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> ( <span style="color:#a6e22e">$obj</span>[ <span style="color:#e6db74">&#34;0&#34;</span> ].<span style="color:#a6e22e">scrollHeight</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">_maxHeight</span> ) {
            <span style="color:#a6e22e">_valueAux</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_valueAux</span>.<span style="color:#a6e22e">substr</span>( <span style="color:#ae81ff">0</span>, ( <span style="color:#a6e22e">_lenValueAux</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span> ) ) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;…&#34;</span>;
            <span style="color:#a6e22e">$obj</span>.<span style="color:#a6e22e">text</span>( <span style="color:#a6e22e">_valueAux</span> );
            <span style="color:#a6e22e">_lenValueAux</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_valueAux</span>.<span style="color:#a6e22e">length</span>;
        }

    }

}
</code></pre></div>

<p>También hay <a href="http://dotdotdot.frebsite.nl/">plugins en jQuery,</a> para un uso más avanzado y complejo no está de más echarle un ojo. Para más información, o una implementación más optimizada, <a href="http://stackoverflow.com/questions/536814/insert-ellipsis-into-html-tag-if-content-too-wide">hay un hilo en Stackoverflow donde hablan del tema.</a></p>

    </div>
    <div class="my-16 border-b border-gray-400"></div>
    <div class="mb-6 text-center max-w-3xl mx-auto">
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/compilando-ficheros-sass-con-grunt/">
            &laquo; Compilando ficheros Sass con grunt
        </a>
        
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/jshint-y-formateo-de-c%C3%B3digo-al-hacer-commit-con-git-git-hooks/">
            JSHint y formateo de código al hacer commit con git (Git hooks) &raquo;
        </a>
        
    </div>

</div>


      </main>
    
    
    
  </body>
</html>
