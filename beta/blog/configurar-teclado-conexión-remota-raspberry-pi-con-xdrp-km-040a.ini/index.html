<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.58.3" />

<link rel="stylesheet" href="https://javifm.com/beta/css/styles.css">


<title>Configurar teclado conexión remota Raspberry Pi con XDRP – km-040a.ini | Frontend developer</title>

    
</head>

<body>
    <div class="bg-gray-100 prefers-dark:bg-gray-900 border-t-4 border-green-500">
    <div class="container mx-auto">
        <nav class="flex flex-wrap justify-end py-6 px-4">
            
            
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hover:bg-gray-300 hover:rounded-sm" href="/beta/">Inicio</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 font-semibold bg-gray-300 rounded-sm" href="/beta/blog/">Blog</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hover:bg-gray-300 hover:rounded-sm" href="/beta/tags/">Tags</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hover:bg-gray-300 hover:rounded-sm" href="/beta/sobre-mi/">Sobre mí</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hover:bg-gray-300 hover:rounded-sm" href="/beta/search/">Buscar</a>
            
        </nav>
    </div>
</div>

    <main id="main">
        

<div class="container mx-auto px-4 single-post">
    <div class="my-6">
        <h1 class="title">Configurar teclado conexión remota Raspberry Pi con XDRP – km-040a.ini</h1>
        

<div class="flex flex-wrap items-center text-gray-600">
    <time datetime="2017-03-07">
        Publicado el 7 Mar 2017</time>
    
    <span>
        <span class="mx-2">&bull;</span>Tiempo de lectura: 2min
    </span>
    
</div>

    <div class="mt-4">
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/raspberry-pi">raspberry pi</a>
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/xdrp">xdrp</a>
        
    </div>


    </div>
    <div class="single-post-content">
        <p>Si te conectas de manera remota a tu raspberry, a través de la aplicación de <strong>Conexión a escritorio remoto de Windows</strong> por ejemplo, tarde o temprano te darás cuentas que si no utilizas un teclado inglés, muchos de los símbolos y teclas están cambiados. Puede convertirse en una odisea el simple hecho de introducir el password de conexión si este tiene algún caracter especial.</p>

<p>¿Pero cómo es esto posible? Si al configurar mi raspberry me preocupé de cambiar la configuración de teclado a español (o el idioma que sea). Bien esto  sucede por tener el teclado conectado fisicamente, pero si desconectas teclado y ratón y te conectas remotamente, <strong>la raspberry tomará por defecto que utilizas un teclado inglés americano.</strong> Veamos como solucionarlo.</p>

<p>Si estás conectado en remoto, ten en cuenta que <strong>te deberás conectar fisicamente (con un teclado)</strong> a la raspberry, de lo contrario los comandos necesarios para iniciar la configuración no funcionarán. Una vez conectado físicamente, veamos paso a paso como proceder:</p>

<ol>
  <li>Ejecuta el siguiente comando, con el cual indicamos que queremos usar un teclado español de españa.</li>
  <div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">setxkbmap -layout <span class="s1">&#39;es,es&#39;</span> </code></pre></div>
  

  <li>Navega al directorio _/etc/xrdp_, haz `ls` y comprueba que no haya un fichero **km-040a.ini**, que es el correspondiente al teclado español. Si lo hay, no está de más de hacer un backup por si acaso. Lo normal es que no lo haya, asi que a través del siguiente comando lo crearemos.</li>
 <div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xrdp-genkeymap /etc/xrdp/km-040a.ini </code></pre></div>

  <li>Este es el fichero que se encarga de establecer los mapeos a las teclas. Crearemos un backup de él antes de modificarlo. Desde la consola, con sudo ejecutaremos:</li>
  <div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp km-040a.ini km-040a.ini.backup </code></pre></div>

  <li>Con esto tendríamos ya funcionando el teclado, pero no del todo. Seguramente muchos símbolos ya se hayan corregido, pero combinaciones con la tecla _AltGr_, y las flechas arriba, abajo, derecha, izquierda puede que no funcionen. Si este es el caso, hay que editar el fichero **km-040a.ini** y terminar de mapear todo correctamente. Por suerte <a href=" https://github.com/javifm86/km-041a.ini/blob/master/km-040a.ini">pude encontrar por internet un fichero que funcionaba bien</a> con mi teclado, y simplemente lo sobreescribí.</li>
</ol>

<p>Si estás buscando algún otro fichero de configuración para otro teclado, puedes probar a ver si lo encuentras desde <a href="https://github.com/neutrinolabs/xrdp/tree/master/instfiles">este repositorio</a>. Si no está, deberás averiguar el nombre de fichero para tu teclado en función del país, y seguramente buscando en Google alguien haya encontrado la solución.</p>

<p>Yo pude solucionarlo gracias a dos artículos en inglés:</p>

<ul>
<li><a href="http://c-nergy.be/blog/?p=2879">Conexión escritorio remoto en Ubuntu.</a></li>
<li><a href="http://c-nergy.be/blog/?p=3858">Teclas especiales en XDRP.</a></li>
</ul>

    </div>
    <div class="my-16 border-b border-gray-400"></div>
    <div class="mb-6 text-center max-w-3xl mx-auto">
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/direcci%C3%B3n-ip-fija-para-raspberry-en-raspbian/">
            &laquo; Dirección IP fija para Raspberry en Raspbian
        </a>
        
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/conexi%C3%B3n-remota-a-raspberry-pi/">
            Conexión remota a Raspberry Pi &raquo;
        </a>
        
    </div>

</div>


    </main>
    
    <footer class="bg-gray-900 text-blue-100 p-4">
    <div class="container">
        <div class="text-center">
            &copy; 2019 Sitio construido con Hugo alojado en Github.
        </div>
    </div>
</footer>

    
</body>

</html>
