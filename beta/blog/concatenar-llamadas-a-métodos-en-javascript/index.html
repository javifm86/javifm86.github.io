<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Hugo 0.58.3" />
    
    <link rel="stylesheet" href="https://javifm.com/beta/css/styles.css">
    
    
    <title>Concatenar llamadas a métodos en Javascript | Frontend developer</title>
    <style>
    .testing {
      max-width: 700px;
    }
</style>

  </head>

  <body>
    <div class="bg-gray-100 prefers-dark:bg-gray-900 border-t-4 border-green-500">
    <div class="container mx-auto">
        <nav class="flex p-6">
            
            
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/">Inicio</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase active" href="/beta/blog/">Blog</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/tags/">Tags</a>
            
            
            
            
            
                
            

            <a class="mr-6 p-2 text-gray-700 hover:text-green-500 prefers-dark:hover:text-red-500 prefers-dark:focus:text-white uppercase " href="/beta/sobre-mi/">Sobre mí</a>
            
        </nav>
    </div>
</div>

    
      <main id="main">
       

<div class="container mx-auto px-4 single-post">
    <div class="my-6">
        <h1 class="title">Concatenar llamadas a métodos en Javascript</h1>
        

<div class="flex flex-wrap items-center text-gray-600">
    <time datetime="2015-04-21">
        Publicado el 21 Abr 2015</time>
    
    <span>
        <span class="mx-2">&bull;</span>Tiempo de lectura: 2min
    </span>
    
</div>

    <div class="mt-4">
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/javascript">javascript</a>
        
    </div>


    </div>
    <div class="single-post-content">
        <p>Vamos a ver de una manera rápida, como podemos <strong>concatenar llamadas a distintos métodos</strong> sobre un mismo objeto en Javascript (en inglés, <em>Method Chaining in JavaScript</em>). Este patrón, es utilizado en el popular framework jQuery, en el cual pueden llamarse a varios métodos sobre un selector jQuery. Por ejemplo:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#selector&#34;</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;.square&#34;</span>).<span style="color:#a6e22e">css</span>(<span style="color:#e6db74">&#34;height&#34;</span>, <span style="color:#e6db74">&#34;100px&#34;</span>).<span style="color:#a6e22e">show</span>();

<span style="color:#75715e">// En caso de concatenar muchos métodos
</span><span style="color:#75715e"></span><span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#selector&#34;</span>)
    .<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;.square&#34;</span>)
    .<span style="color:#a6e22e">css</span>(<span style="color:#e6db74">&#34;height&#34;</span>, <span style="color:#e6db74">&#34;100px&#34;</span>)
    .<span style="color:#a6e22e">show</span>();
    
</code></pre></div>

<p>Que es más corto, o más legible (para gustos los colores) que esto:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">$selector</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#34;#selector&#34;</span>);

<span style="color:#a6e22e">$selector</span>.<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#34;.square&#34;</span>);
<span style="color:#a6e22e">$selector</span>.<span style="color:#a6e22e">css</span>(<span style="color:#e6db74">&#34;height&#34;</span>, <span style="color:#e6db74">&#34;100px&#34;</span>)
<span style="color:#a6e22e">$selector</span>.<span style="color:#a6e22e">show</span>();
</code></pre></div>

<p>Bien, vamos a ver como <strong>implementar este patrón</strong> en Javascript puro, supongamos un objeto tonto, con 2 métodos sencillos como el siguiente:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Widget</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">param1</span>, <span style="color:#a6e22e">param2</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">param1</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">param2</span>;
};

<span style="color:#a6e22e">Widget</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">method1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg1</span>);
};

<span style="color:#a6e22e">Widget</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">method2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg2</span>);
};

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">instancia</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Widget</span>(<span style="color:#e6db74">&#34;Hola&#34;</span>, <span style="color:#e6db74">&#34;Mundo&#34;</span>);
</code></pre></div>

<p>Si quisieramos llamar a los 2 métodos, deberíamos hacerlo de la siguiente manera:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#a6e22e">instancia</span>.<span style="color:#a6e22e">method1</span>();
<span style="color:#a6e22e">instancia</span>.<span style="color:#a6e22e">method2</span>();
</code></pre></div>

<p>Y si intentamos concatenar directamente las llamadas, ejecutará el primer método, pero fallará el segundo:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#a6e22e">instancia</span>.<span style="color:#a6e22e">method1</span>().<span style="color:#a6e22e">method2</span>();

<span style="color:#75715e">// Uncaught TypeError: Cannot read property &#39;method2&#39; of undefined
</span></code></pre></div>

<p>¿Como hacerlo funcionar? Es sencillo, tan solo deberemos añadir en los métodos <code>return this;</code> , de esta manera cuando se llame a <code>method1</code> se devolverá el objeto, y al llamar al siguiente método ya no dará undefined, puesto que al haberse devuelto el objeto en el método anterior, ya encuentra la referencia para poder llamar a <code>method2</code>. Así queda el código:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Widget</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">param1</span>, <span style="color:#a6e22e">param2</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">param1</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">param2</span>;
};

<span style="color:#a6e22e">Widget</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">method1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg1</span>);
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>;
};

<span style="color:#a6e22e">Widget</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">method2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">msg2</span>);
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>;
};

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">instancia</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Widget</span>(<span style="color:#e6db74">&#34;Hola&#34;</span>, <span style="color:#e6db74">&#34;Mundo&#34;</span>);

<span style="color:#a6e22e">instancia</span>.<span style="color:#a6e22e">method1</span>().<span style="color:#a6e22e">method2</span>();
</code></pre></div>

<p>¿Sencillo verdad? Este patrón de diseño se conoce como <a href="http://en.wikipedia.org/wiki/Fluent_interface" title="Fluent Interface">Fluent interface.</a> Usarlo o no ya es cuestión de gustos.</p>

    </div>
    <div class="my-16 border-b border-gray-400"></div>
    <div class="mb-6 text-center max-w-3xl mx-auto">
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/jshint-y-formateo-de-c%C3%B3digo-al-hacer-commit-con-git-git-hooks/">
            &laquo; JSHint y formateo de código al hacer commit con git (Git hooks)
        </a>
        
        
        <a class="bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/width-de-jquery-sin-redondeo/">
            Width() de jQuery sin redondeo &raquo;
        </a>
        
    </div>

</div>


      </main>
    
    
    
  </body>
</html>
