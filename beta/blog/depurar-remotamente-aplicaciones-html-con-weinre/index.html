<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.58.3" />

<link rel="stylesheet" href="https://javifm.com/beta/css/styles.css">


<title>Depurar remotamente aplicaciones HTML con Weinre | Frontend developer</title>

    
</head>

<body>
    <div id="site-wrapper" class="relative overflow-hidden w-full">
        <div id="site-canvas" class="w-full h-full relative">
            



<a id="skiplink" class="sr-only absolute top-0 left-0 mt-2 ml-1 font-semibold bg-gray-300 rounded-sm p-2 uppercase text-gray-700" href="#main">
    Saltar al contenido principal
</a>

<div class="bg-gray-100 prefers-dark:bg-gray-900 border-t-4 border-green-500">
    <div class="container mx-auto">
        <nav class="flex flex-wrap justify-end items-center py-6 px-4">
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 hover:rounded-sm" href="/beta/">Inicio</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hidden sm:inline-flex font-semibold bg-gray-300 rounded-sm" href="/beta/blog/">Blog</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 hover:rounded-sm" href="/beta/tags/">Tags</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 hover:rounded-sm" href="/beta/sobre-mi/">Sobre mí</a>
            
                
                
                
                
                
                    
                
                <a class="mr-6 first:-ml-2 p-2 uppercase text-gray-700 hidden sm:inline-flex hover:bg-gray-300 hover:rounded-sm" href="/beta/search/">Buscar</a>
            
            <button type="button" id="sidebar-open" aria-label="Abrir menu" class="sm:hidden text-gray-700 flex items-center uppercase text-xl p-1 -m-1">
                Menú
                



















<svg xmlns="http://www.w3.org/2000/svg" class='ml-2 w-6 h-6 fill-current'  id='open-menu' role="img" aria-labelledby="titleId" viewBox="0 0 20 20"><title id="titleId">Menú</title><path role="presentation" d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg>


                



















<svg xmlns="http://www.w3.org/2000/svg" class='ml-2 w-6 h-6 fill-current hidden'  id='close-menu' role="img" aria-labelledby="titleId" viewBox="0 0 20 20"><title id="titleId">Cerrar</title><path role="presentation" d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"></path></svg>


            </button>
        </nav>
    </div>
</div>

<div id="site-menu" class="h-full absolute top-0 py-6 px-4 bg-gray-800 hidden">
    <nav class="flex flex-col uppercase text-xl">
    
        
        
        
        
        
            
        
        <a class="mb-1 px-4 py-2 text-gray-100" href="/beta/">Inicio</a>
    
        
        
        
        
        
            
        
        <a class="mb-1 px-4 py-2 bg-green-600 rounded text-white font-semibold outline-none focus:bg-white focus:text-green-600" href="/beta/blog/">Blog</a>
    
        
        
        
        
        
            
        
        <a class="mb-1 px-4 py-2 text-gray-100" href="/beta/tags/">Tags</a>
    
        
        
        
        
        
            
        
        <a class="mb-1 px-4 py-2 text-gray-100" href="/beta/sobre-mi/">Sobre mí</a>
    
        
        
        
        
        
            
        
        <a class="mb-1 px-4 py-2 text-gray-100" href="/beta/search/">Buscar</a>
    
    </nav>
</div>

            <main id="main">
                

<div class="container mx-auto px-4 single-post">
    <div class="my-6">
        <h1 class="title">Depurar remotamente aplicaciones HTML con Weinre</h1>
        

<div class="flex flex-wrap flex-col sm:flex-row sm:items-center text-gray-700">
    <time datetime="2014-06-15">
        Publicado el 15 Jun 2014</time>
    
    <span>
        <span class="mx-2 hidden sm:inline-flex">&bull;</span>Tiempo de lectura: 4min
    </span>
    
</div>

    <div class="mt-4">
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/debug">debug</a>
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/smart-tv">smart TV</a>
        
            
            <a class="tag inline-block text-sm mr-2 mb-2" href="https://javifm.com/beta/tags/javascript">javascript</a>
        
    </div>


    </div>
    <div class="single-post-content">
        <p>Nunca me había visto en la necesidad de hacer uso de esta funcionalidad, normalmente desarrollo aplicaciones y páginas web y las pruebo directamente en el navegador, para <strong>depurar el código Javascript</strong> suelo utilizar las herramientas de desarrollador de Chrome. ¿En qué casos podemos necesitar <strong>depurar remotamente</strong>? La respuesta es sencilla, en dispositivos en los cuales no podemos acceder a herramientas de depuración del navegador. Desde la llegada de HTML5 y sus funcionalidades, es posible desarrollar aplicaciones para móviles, Smart TV&#8230; Actualmente estoy trabajando en desarrollo de aplicaciones para <strong>Smart TV,</strong> y me ví en la necesidad de depurar remotamente al realizar pruebas en las teles directamente.</p>

<p>¿Como depurar remotamente? Para ellos podemos utilizar <a href="http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html" title="Weinre">Weinre,</a> que se instala como un módulo de <a href="http://nodejs.org/" title="Node.js">Node.js.</a> Lo primero de todo, como es lógico será <a href="http://nodejs.org/download/" title="Descarga Node.js">instalar Node.js</a> si no lo tenemos ya instalado. Una vez lo tenemos, podremos instalar Weinre a través de <a href="https://www.npmjs.org/doc/README.html" title="Node Package Manager">npm,</a> tan solo debemos ir a la consola y ejecutar el siguiente comando:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">npm -g install weinre</code></pre></div>

<p>Yo utilizo Windows, aunque también tengo Ubuntu, en sistemas Linux deberemos ejecutar el comando precedido de sudo probablemente. Así de simple y así de fácil, ya tenemos instalado weinre. Weinre ejecutará un servidor en nuestra máquina, que será la interfaz a través de la cual depuraremos nuestro aplicación HTML5, que se ejecutará en otro dispositivo (móvil, tablet, Smart TV, etc).</p>

<p><strong>La interfaz es practicamente la misma que las developer tools de Chrome,</strong> asi que si sueles usarla te desenvolverás con soltura en ella, aunque tiene algunas limitaciones.</p>

<p>Para ejecutar el servidor de weinre, vamos a la consola y ejecutamos:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">weinre --boundHost <span class="m">192</span>.168.1.2</code></pre></div>

<p>En en este caso he utilizado la IP que tengo asignada en mi ordenador en mi red local, 192.168.1.2. Podríamos ejecutar en localhost, pero en ese caso solo podríamos hacer pruebas desde nuestro ordenador, que podría ser util quizás para depurar desde algún emulador. De esta manera, podremos depurar aplicaciones de otros dipositivos que se ejecuten en nuestra misma red local. El comando es el más simple, puedes <em>teclear weinre &#8211;help</em> y ver otro tipo de opciones, como el puerto por el que se lanza, pero en mi caso la configuración por defecto me vale. Si es la primera vez que ejecutas weinre, y estás en windows, probablemente el Firewall pida permisos para que weinre acceda a la red. Veremos un mensaje que confirma que se lanza el servidor:</p>




























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola.png 677w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola_hu5b295d2326db684360e0688720931217_9642_500x0_resize_box_2.png 500w
    
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola.png"
    width="677" height="282"
    alt='Consola con mensaje de confirmación de que el servidor de Weinre se ha iniciado correctamente'>


<p>Ya podemos abrir en el navegador la url, en mi caso: <a href="http://192.168.1.2:8080/">http://192.168.1.2:8080/</a> El siguiente paso es muy simple, tan solo deberemos incluir un script en nuestra aplicación, para que podamos depurar remotamente. Para el ejemplo en concreto, nuestra SmartTV está conectada en la misma red local, por lo que simplemente añadimos la siguiente línea en nuestra aplicación:</p>

<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;http://192.168.1.2:8080/target/target-script-min.js#instancia&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span></code></pre></div>

<p>Observemos que se ha concatenado <strong>#instancia,</strong> ¿Qué quiere decir esto? Que podemos crear distintas instancias para depurar remotamente, podríamos montar weinre en un ordenador, y conectarnos varias personas a él, y no sufriremos interferencias en los logs si cada uno tenemos un hashtag diferente. Siguiendo con el ejemplo, para poder conectar con la interfaz desde la que depuraremos, iremos a la siguiente url: <a href="http://192.168.1.2:8080/client/#instancia">http://192.168.1.2:8080/client/#instancia</a> Y nos encontraremos con una interfaz bastante familiar:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/weinre.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/weinre_hu6a323dfde99e137bde1231df1c0da424_27435_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/weinre_hu6a323dfde99e137bde1231df1c0da424_27435_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/weinre.png"
    width="967" height="623"
    alt='Consola de visualización de Weinre'>


<p>Ya solo nos queda realizar pruebas, ejecutaremos nuestra aplicación con el script incluido, y donde pone Target comenzaremos a ver las ejecuciones. Al igual que en Chrome, podemos ir a la pestaña Elements, ver el código fuente cargado, editarlo, añadir o quitar estilos css. También disponemos de Resources, Network, Timeline y Console, desde donde podremos visualizar los console.log. Por lo que he probado weinre tarda un poco en inicializarse, por lo que <strong>es conveniente que ejecutes los console.log con un timeout,</strong> de lo contrario puede que no aparezcan:</p>

<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hola Mundo&#34;</span><span class="p">);</span> <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</code></pre></div>

<p>En este caso lo he ejecutado desde mi mismo ordenador, pero en el trabajo pruebo sin problemas con un televisor LG. Así vemos que hay una conexión, una vez ejecutamos la aplicación:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/test.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/test_huc65f95007c9f822997e923c6e385d8d3_29109_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/test_huc65f95007c9f822997e923c6e385d8d3_29109_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/test.png"
    width="967" height="623"
    alt='Consola de Weinre mostrando conexión satisfactoria'>


<p>Este es el ejemplo, un simple Hola Mundo con un console.log al cargar la página:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/hola_mundo.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/hola_mundo_hu9f5403e280ef7f75fb058be226ed3a8d_14541_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/hola_mundo_hu9f5403e280ef7f75fb058be226ed3a8d_14541_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/hola_mundo.png"
    width="967" height="623"
    alt='Hola mundo'>


<p>En la pestaña consola observamos que recibimos el console.log:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola_prueba.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola_prueba_hu98f59d75f3c7a35d1d8b08745d5b2425_21121_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola_prueba_hu98f59d75f3c7a35d1d8b08745d5b2425_21121_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/consola_prueba.png"
    width="967" height="623"
    alt='Prueba de console.log mostrando Hola mundo'>


<p>Desde la pestaña Elements, podemos modificar la página, los estilos, en este caso cambiamos el color de fondo para el body:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/elements.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/elements_huf04964ba7462047f27eae3520c21871b_27519_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/elements_huf04964ba7462047f27eae3520c21871b_27519_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/elements.png"
    width="967" height="623"
    alt='Consola de weinre en atributo styles para cambiar el color de fondo de la etiqueta body'>


<p>Y efectivamente, vemos que se cambia correctamente:</p>






























  <img
    class='mb-6 '
    srcset='
    /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/rojo.png 967w
    
      ,/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/rojo_hua325a95e671ef46fb5da4ef6bbd8fc89_14521_500x0_resize_box_2.png 500w
    
    
      , /beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/rojo_hua325a95e671ef46fb5da4ef6bbd8fc89_14521_800x0_resize_box_2.png 800w
    
    
    '
    src="/beta/blog/depurar-remotamente-aplicaciones-html-con-weinre/img/rojo.png"
    width="967" height="623"
    alt='Página con el fondo cambiado a color rojo'>


<p>Desde la consola podemos inspeccionar el valor de las variables javascript. <strong>¿Qué limitaciones tiene?</strong> Por ejemplo, al editar estilos CSS, y al escribir, no te va sugiriendo para autocompletar las propiedades. Tampoco podemos ejecutar debugger, para depurar y añadir puntos de parada e ir inspeccionando paso por paso nuestros scripts. Eso sería ya simplemente increíble, pero con todo lo expuesto, weinre parece una de las mejores herramientas a la hora de hacer remote debugging. Toda esta información y más está en la página web de Weinre, asi que si se te queda corta esta entrada, no dudes en consultar toda la información en su web.</p>

<p>Enlaces: <a href="http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html" title="Weinre">Web oficial de Weinre</a></p>

    </div>
    <div class="my-16 border-b border-gray-400"></div>
    <div class="mb-6 text-center max-w-3xl mx-auto">
        
        <a class="outline-none bg-transparent text-green-700 font-semibold hover:text-white hover:bg-green-500 focus:text-white focus:bg-green-500 py-2 px-4 border border-green-500 hover:border-transparent rounded block mb-4" href="https://javifm.com/beta/blog/detectar-fin-de-una-transici%C3%B3n/animaci%C3%B3n-css3-con-javascript/">
            &laquo; Detectar fin de una transición/animación CSS3 con Javascript
        </a>
        
        
    </div>

</div>


            </main>
            <footer class="bg-gray-900 text-blue-100 p-4">
    <div class="container">
        <div class="text-center">
            &copy; 2019 Sitio construido con Hugo alojado en Github.
        </div>
    </div>
</footer>

        </div>
    </div>
    
<script src="https://javifm.com/beta/js/focus-visible.min.js"></script>
<script>
    (function() {
        const $bodyElement = document.getElementsByTagName('body')[0];
        const $svgOpen = document.getElementById('open-menu');
        const $svgClose = document.getElementById('close-menu');
        const $siteCanvas = document.getElementById('site-canvas');
        const $siteMenu = document.getElementById('site-menu');
        const $buttonNav = document.getElementById('sidebar-open');
        const transitionEnd = transitionEndEventName();
        const CSS_CLASS_NAV = 'show-nav';
        let stateNav = 'closed';

        const closeMenuOnResize = debounce(function() {
            if ($bodyElement.classList.contains(CSS_CLASS_NAV) && window.screen.width > 639) {
                toggleNav();
            }
        }, 0);

        
        $buttonNav.addEventListener('click', toggleNav);
        window.addEventListener('resize', closeMenuOnResize);

        $siteCanvas.addEventListener(
            transitionEnd,
            function() {
                if (stateNav === 'opening') {
                    $svgOpen.classList.add('hidden');
                    $svgClose.classList.remove('hidden');
                    $buttonNav.setAttribute('aria-label', 'Cerrar menú');
                    stateNav = 'open';
                } else {
                    $svgOpen.classList.remove('hidden');
                    $svgClose.classList.add('hidden');
                    $siteMenu.classList.add('hidden');
                    $buttonNav.setAttribute('aria-label', 'Abrir menú');
                    stateNav = 'closed';
                }
            },
            false
        );
        
        

        function toggleNav() {
            if ($bodyElement.classList.contains(CSS_CLASS_NAV)) {
                $bodyElement.classList.remove(CSS_CLASS_NAV);
                stateNav = 'closing';
            } else {
                $bodyElement.classList.add(CSS_CLASS_NAV);
                stateNav = 'opening';
                $siteMenu.classList.remove('hidden');
            }
        }

        function debounce(func, wait, immediate) {
            let timeout;
            return function() {
                let context = this;
                let args = arguments;
                const later = function() {
                    timeout = null;
                    if (!immediate) {
                        func.apply(context, args);
                    }
                };
                let callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) {
                    func.apply(context, args);
                }
            };
        }

        function transitionEndEventName() {
            let i;
            const el = document.createElement('div');
            const transitions = {
                'transition': 'transitionend',
                'OTransition': 'otransitionend',  
                'MozTransition': 'transitionend',
                'WebkitTransition': 'webkitTransitionEnd'
            };

            for (i in transitions) {
                if (transitions.hasOwnProperty(i) && el.style[i] !== undefined) {
                    return transitions[i];
                }
            }
        }

    })();

</script>

    
</body>

</html>
